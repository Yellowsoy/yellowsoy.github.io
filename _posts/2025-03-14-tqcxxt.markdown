---
layout:     post
title:      "å¤©æ°”æŸ¥è¯¢ç³»ç»Ÿ"
subtitle:   " \"å¤§å­¦ä½œä¸šåˆ†äº«\""
date:       2025-03-14 18:00:00
author:     "Yellowsoy"
header-img: "img/post-bg-2015.jpg"
catalog: false
tags:
    - ç¼–ç¨‹
---
> å¤§å­¦çš„æœŸæœ«ä½œä¸šï¼Œç»“åˆäº†ç½‘ä¸Šå¾ˆå¤šå¤§ä½¬çš„ä»£ç ï¼Œç›´æ¥ä¿®æ”¹æ•´åˆäº†ä¸€ä¸‹ã€‚
> æˆ‘ä»¬è€å¸ˆè¦æ±‚ä»£ç è¦200è¡Œï¼Œæ‰€ä»¥å†™äº†å¾ˆå¤šã€‚ä¹Ÿé¡ºä¾¿åˆ†äº«ç»™å„ä½éœ€è¦äº¤ä½œä¸šçš„åŒå­¦ã€‚

å¤©æ°”æ•°æ®æ¥å£ä½¿ç”¨äº†â€œå¿ƒçŸ¥å¤©æ°”â€
ä¼šæŸ¥è¯¢æœ€è¿‘çš„å¤©æ°”æ•°æ®å¹¶ä¸”å‘é€åˆ°é‚®ç®±å’Œæ¨é€çš„å¾®ä¿¡ï¼Œå¾®ä¿¡æ¨é€ç”¨çš„æ˜¯pushplus

![](https://attach.52pojie.cn/forum/202401/21/100907sd515m15ebrrxzsb.png)

![](https://attach.52pojie.cn/forum/202401/21/100909jrieqlnaiiqtqnjp.png)

```python
import json
import requests
import datetime
import cn2an
import smtplib
from email.mime.text import MIMEText
from email.header import Header
from tkinter import messagebox# å¼•å…¥å¼¹çª—åº“ï¼Œé˜²æ­¢è§£é‡Šå™¨å¼¹å‡ºæŠ¥é”™ã€‚
from tkinter import *
 
 
# GUI
root = Tk()
# æ–‡æœ¬
location_text = Text(root, width=25, height=2, font=("æ¥·ä½“", 15)) # æŸ¥è¯¢åŸå¸‚
location_text.insert("1.0", "è¯·è¾“å…¥å¸‚çº§åœ°å€\nï¼ˆé»˜è®¤ä¸ºå½“å‰IPåœ°å€ï¼‰")
location_text.grid(row=0, column=1)
email1 = Text(root, width=25, height=2, font=("æ¥·ä½“", 15))# æ¥æ”¶é‚®ç®±
email1.insert("1.0", "è¯·è¾“å…¥æ¥æ”¶é‚®ç®±\nï¼ˆå¤šä¸ªé‚®ç®±è¯·ç”¨,åˆ†å‰²ï¼‰")
email1.grid(row=1, column=1)
pushplus_text = Text(root, width=25, height=2, font=("æ¥·ä½“", 15))# pushplus
pushplus_text.insert("1.0", "è¯·è¾“å…¥pushplusçš„token")
pushplus_text.grid(row=2, column=1)
url_head = "https://api.seniverse.com/v3/weather/daily.json?"
key = "å¤©æ°”ç§˜é’¥"
# ---------------------------------#
def get_weather(locat_name):
    global emailname , token1 # å£°æ˜æ˜¯å…¨å±€å˜é‡
    # é»˜è®¤ä¸ºçš„å€¼
    if locat_name == "\n" or locat_name == "è¯·è¾“å…¥å¸‚çº§åœ°å€\nï¼ˆé»˜è®¤ä¸ºå½“å‰IPåœ°å€ï¼‰\n":
        locat_name = "ip"
    locat_name = locat_name.replace("\n", "")  # å»æ‰è‡ªå¸¦çš„æ¢è¡Œ
    if emailname == "\n" or emailname == "è¯·è¾“å…¥æ¥æ”¶é‚®ç®±\nï¼ˆå¤šä¸ªé‚®ç®±è¯·ç”¨,åˆ†å‰²ï¼‰\n":
        emailname = "\n"
    emailname = emailname.replace("\n", "")  # å»æ‰è‡ªå¸¦çš„æ¢è¡Œ
    if token1 == "\n" or token1 == "è¯·è¾“å…¥pushplusçš„token\n":
        token1 = '\n'
    token1 = token1.replace("\n", "")  # å»æ‰è‡ªå¸¦çš„æ¢è¡Œ
    # æ•´åˆurl
    url = url_head + "key=" + key + "&" + "location=" + locat_name + "&" + "language=zh-Hans&unit=c&start=0&days=5"
    # è·å–å¤©æ°”æ•°æ®
    resq = requests.get(url)
 
    if resq.status_code == 200:
        val_data = resq.text
        weather_data = json.loads(val_data)
 
        locat = weather_data['results'][0]['location']['name']
        timezone = weather_data['results'][0]['location']['timezone']
        timezone_offset = weather_data['results'][0]['location']['timezone_offset']
 
        print("==========================")
        print("")
 
        print("åœ°åŒºï¼š", locat)
        print("æ—¶åŒºï¼š", timezone)
        print("æ—¶åŒºåç§»ï¼š", timezone_offset)
        print("")
 
        weath_cn = 0  # å¤©æ°”åºå·
        daily = weather_data['results'][0]['daily']
        while weath_cn < len(daily):
            daily_d = daily[weath_cn]
            with open(locat + daily_d['date']+'å¤©æ°”.txt', 'w') as file:
                    print("")
                    print("--------")
                    print("æ—¶é—´ï¼š", daily_d['date'])
                    print("å¤©æ°”ï¼š", daily_d['text_day'])
                    print("ä»Šæ—¥æœ€é«˜æ¸©åº¦(â„ƒ):", daily_d['high'])
                    print("ä»Šæ—¥æœ€ä½æ¸©åº¦(â„ƒ):", daily_d['low'])
                    print("æ¹¿åº¦(%):", daily_d['humidity'])
                    print("é£å‘:", daily_d['wind_direction'])
 
                    print("é£é€Ÿ(km/h):", daily_d['wind_speed'])
                    print("é£å‘è§’åº¦(0~360):", daily_d['wind_direction_degree'])
                    print("é£åŠ›ç­‰çº§:", daily_d['wind_scale'])
                    print("é™æ°´é‡(mm):", daily_d['rainfall'])
                    # æ‰“å¼€æ–‡ä»¶ä»¥å†™å…¥æ¨¡å¼
                    file.write("æ—¶é—´ï¼š" + daily_d['date'] + "\n")
                    file.write("å¤©æ°”ï¼š" + daily_d['text_day'] + "\n")
                    file.write("ä»Šæ—¥æœ€é«˜æ¸©åº¦(â„ƒ):" + str(daily_d['high']) + "\n")
                    file.write("ä»Šæ—¥æœ€ä½æ¸©åº¦(â„ƒ):" + str(daily_d['low']) + "\n")
                    file.write("æ¹¿åº¦(%)ï¼š" + str(daily_d['humidity']) + "\n")
                    file.write("é£å‘:" + daily_d['wind_direction'] + "\n")
                    file.write("é£é€Ÿ(km/h):" + str(daily_d['wind_speed']) + "\n")
                    file.write("é£å‘è§’åº¦(0~360):" + str(daily_d['wind_direction_degree']) + "\n")
                    file.write("é£åŠ›ç­‰çº§:" + daily_d['wind_scale'] + "\n")
                    file.write("é™æ°´é‡(mm):" + str(daily_d['rainfall']) + "\n")
                    weath_cn += 1
 
        print("")
 
        print("æœ€åæ›´æ–°äº:", weather_data['results'][0]['last_update'])
        print("")
        print("==========================")
 
        # APIæ¥å£è¯·æ±‚
        params = {
            "key": "å¤©æ°”å¯†é’¥",
            "location": locat_name,
            "language": "zh-Hans",
            "unit": "c",
        }
 
        # åŸºæœ¬å¤©æ°”
        url = "https://api.seniverse.com/v3/weather/now.json"
        # è·å–æ•°æ®
        r = requests.get(url, params=params)
        # è§£ææ•°æ®
        data = r.json()["results"]
        address = data[0]["location"]['path']  # åœ°ç‚¹
        temperature = data[0]['now']["temperature"]  # ç°åœ¨æ¸©åº¦
        text = data[0]['now']["text"]  # ç°åœ¨å¤©æ°”æƒ…å†µ
        last_update = data[0]["last_update"]
 
        # ç”Ÿæ´»æŒ‡æ•°
        url = "https://api.seniverse.com/v3/life/suggestion.json"
        # è·å–æ•°æ®
        r1 = requests.get(url, params=params)
        # è§£ææ•°æ®
        data = r1.json()["results"]
        car = data[0]["suggestion"]['car_washing']["brief"]  # æ´—è½¦
        dressing = data[0]["suggestion"]['dressing']["brief"]  # ç©¿è¡£
        flu = data[0]["suggestion"]['flu']["brief"]  # æ„Ÿå†’
        sport = data[0]["suggestion"]['sport']["brief"]  # è¿åŠ¨
        travel = data[0]["suggestion"]['travel']["brief"]  # æ—…è¡Œå»ºè®®
        uv = data[0]["suggestion"]['uv']["brief"]  # ç´«å¤–çº¿æƒ…å†µ
 
        # æ—¥æœŸ
        date = datetime.date.today().strftime("%Y-%m-%d")
        # æ˜ŸæœŸå‡ 
        weekday = datetime.date.today().weekday() + 1
        # ç”¨cn2anåŒ…å°†é˜¿æ‹‰ä¼¯æ•°å­—è½¬ä¸ºä¸­æ–‡æ•°å­—
        weekday = cn2an.an2cn(weekday)
 
        # æ˜¾ç¤ºæ¶ˆæ¯
        message = f"æ—¥æœŸï¼š{date} å‘¨{weekday}   " + address + "    å¤©æ°”ï¼š\n" + \
                  "ç°åœ¨æ¸©åº¦ï¼š" + temperature + "â„ƒ" + \
                  "\nç°åœ¨å¤©æ°”æƒ…å†µï¼š" + text + \
                  "\n" \
                  "\næ´—è½¦å»ºè®®ï¼š" + car + \
                  "\nç©¿è¡£å»ºè®®ï¼š" + dressing + \
                  "\næ„Ÿå†’æƒ…å†µï¼š" + flu + \
                  "\nè¿åŠ¨å»ºè®®ï¼š" + sport + \
                  "\næ—…è¡Œå»ºè®®ï¼š" + travel + \
                  "\nç´«å¤–çº¿æƒ…å†µï¼š" + uv + \
                  "\næ•°æ®æ›´æ–°æ—¶é—´ï¼š" + last_update
        print(message)
 
        # å‘é€é‚®ä»¶
        def send_email(subject, email_content, toaddr=emailname):
            # å‘ä»¶äººé‚®ç®±è´¦å·
            fromaddr = '123qq.com'
            # å‘ä»¶äººé‚®ç®±å¯†ç 
            passwd = 'QQé‚®ç®±éœ€è¦ç”³è¯·æˆæƒç '
            server = smtplib.SMTP_SSL('smtp.qq.com', port=465)
            server.login(fromaddr, passwd)
            message = MIMEText(email_content, 'plain', 'utf-8')
            message['From'] = 123 <123@qq.com>'
            message['To'] = toaddr
            message['Subject'] = Header(subject, 'utf-8')
            receiver = message['To'].split(';')
            server.sendmail(fromaddr, receiver, message.as_string())
            server.quit()
 
        send_email(locat+f"{date} å‘¨{weekday}"  +"   çš„å¤©æ°”æƒ…å†µ", message)
        print("\n\né‚®ä»¶å‘é€æˆåŠŸ")
 
        # å¾®ä¿¡å…¬ä¼—å·æ¨é€å¤©æ°”
        def send_wechat(message):
            token = token1
            title =locat+'   çš„å¤©æ°”'
            content = message
            template = 'html'
            url = f"https://www.pushplus.plus/send?token={token}&title={title}&content={content}&template={template}"
            r = requests.get(url=url)
 
        if __name__ == '__main__':
            msg = 'Life is short I use python'
            send_wechat(message)
        print("å¾®ä¿¡å…¬ä¼—å·æ¨é€æˆåŠŸ")
 
        messagebox.showinfo(title='å¤©æ°”è·å–æˆåŠŸ',
                            message=f"{date} å‘¨{weekday}" + "   " + locat + " å¤©æ°”è·å–æˆåŠŸ\næœªæ¥ä¸‰å¤©å¤©æ°”å·²ä¿å­˜ä¸ºTXTæ–‡ä»¶"
                                                                            "\ré‚®ä»¶å·²å‘é€ç»™" + emailname + "\rå¾®ä¿¡å·²æ¨é€é€ç»™" + token1)  # æ¶ˆæ¯æé†’å¼¹çª—ï¼Œç‚¹å‡»ç¡®å®šè¿”å›å€¼ä¸º ok
    else:
        print(resq.status_code)
def start_request():
    text = location_text.get("1.0", "end")
    print(text)
    global emailname , token1 # å£°æ˜æ˜¯å…¨å±€å˜é‡
    emailname = email1.get("1.0", "end")
    token1 = pushplus_text.get("1.0", "end")
 
    # è·å–å¤©æ°”
    get_weather(text)
def info_request():
    messagebox.showinfo(title="æç¤º",
                        message="æœªæ¥3å¤©å¤©æ°”çŠ¶å†µä¼šä¿å­˜ä¸ºTXTæ–‡ä»¶~\rä¸è¾“å…¥ä¸ºé»˜è®¤å€¼\r\nä»…é™å¸‚çº§åŸå¸‚å‘€ğŸ˜Š  \rä½œè€…ï¼šå¿é»„è±†  ")
 
def init_gui():
    root.geometry("380x150+750+400")
    root.title("â€”å¤©æ°”è·å–å·¥å…·ğŸ˜€â€”  ")
    start_button = Button(root, text="è· å–", anchor='w', font=("æ¥·ä½“", 15), command=start_request)
    start_button.grid(row=0, column=0)
    info_button = Button(root, text="å…³ äº", anchor='w', font=("æ¥·ä½“", 15), command=info_request)
    info_button.grid(row=1, column=0)
 
def main():
    init_gui()
    root.mainloop()
 
main()
```


**ä¸‹é¢è¿™ä¸ªæ˜¯æœ‰æ³¨é‡Šçš„ï¼Œç”¨AIç”Ÿæˆçš„æ³¨é‡Šã€‚**

```python
import datetime  # å¯¼å…¥æ—¶é—´å¤„ç†æ¨¡å—
import json  # å¯¼å…¥JSONå¤„ç†æ¨¡å—
import smtplib  # å¯¼å…¥SMTPé‚®ä»¶å‘é€æ¨¡å—
from email.header import Header  # å¯¼å…¥é‚®ä»¶å¤´éƒ¨å¤„ç†æ¨¡å—
from email.mime.text import MIMEText  # å¯¼å…¥é‚®ä»¶å†…å®¹å¤„ç†æ¨¡å—
from tkinter import *  # å¯¼å…¥tkinteræ¨¡å—ï¼Œç”¨äºåˆ›å»ºGUIç•Œé¢
from tkinter import messagebox  # å¯¼å…¥å¼¹çª—åº“ï¼Œé˜²æ­¢è§£é‡Šå™¨å¼¹å‡ºæŠ¥é”™ã€‚
 
import cn2an  # å¯¼å…¥ä¸­æ–‡åˆ°æ‹¼éŸ³è½¬æ¢æ¨¡å—
import requests  # å¯¼å…¥HTTPè¯·æ±‚æ¨¡å—
    '''
    æœ¬ä»£ç ä»…ä½œä¸ºç¨‹åºè¿è¡Œæ³¨ï¼Œéè¿è¡Œä»£ç ï¼ï¼ï¼
    æœ¬ä»£ç ä»…ä½œä¸ºç¨‹åºè¿è¡Œæ³¨ï¼Œéè¿è¡Œä»£ç ï¼ï¼ï¼
    æœ¬ä»£ç ä»…ä½œä¸ºç¨‹åºè¿è¡Œæ³¨ï¼Œéè¿è¡Œä»£ç ï¼ï¼ï¼
    æœ¬ä»£ç ä»…ä½œä¸ºç¨‹åºè¿è¡Œæ³¨ï¼Œéè¿è¡Œä»£ç ï¼ï¼ï¼
    æœ¬ä»£ç ä»…ä½œä¸ºç¨‹åºè¿è¡Œæ³¨ï¼Œéè¿è¡Œä»£ç ï¼ï¼ï¼
    æœ¬ä»£ç ä»…ä½œä¸ºç¨‹åºè¿è¡Œæ³¨ï¼Œéè¿è¡Œä»£ç ï¼ï¼ï¼
    æœ¬ä»£ç ä»…ä½œä¸ºç¨‹åºè¿è¡Œæ³¨ï¼Œéè¿è¡Œä»£ç ï¼ï¼ï¼
    æœ¬ä»£ç ä»…ä½œä¸ºç¨‹åºè¿è¡Œæ³¨ï¼Œéè¿è¡Œä»£ç ï¼ï¼ï¼
    æœ¬ä»£ç ä»…ä½œä¸ºç¨‹åºè¿è¡Œæ³¨ï¼Œéè¿è¡Œä»£ç ï¼ï¼ï¼
    æœ¬ä»£ç ä»…ä½œä¸ºç¨‹åºè¿è¡Œæ³¨ï¼Œéè¿è¡Œä»£ç ï¼ï¼ï¼
    æœ¬ä»£ç ä»…ä½œä¸ºç¨‹åºè¿è¡Œæ³¨ï¼Œéè¿è¡Œä»£ç ï¼ï¼ï¼
    æœ¬ä»£ç ä»…ä½œä¸ºç¨‹åºè¿è¡Œæ³¨ï¼Œéè¿è¡Œä»£ç ï¼ï¼ï¼
    æœ¬ä»£ç ä»…ä½œä¸ºç¨‹åºè¿è¡Œæ³¨ï¼Œéè¿è¡Œä»£ç ï¼ï¼ï¼
    æœ¬ä»£ç ä»…ä½œä¸ºç¨‹åºè¿è¡Œæ³¨ï¼Œéè¿è¡Œä»£ç ï¼ï¼ï¼
    '''
 
# GUI
# åˆ›å»ºä¸€ä¸ªTkinteræ ¹çª—å£å¯¹è±¡
root = Tk()
 
# æ–‡æœ¬
location_text = Text(root, width=25, height=2, font=("æ¥·ä½“", 15)) # æŸ¥è¯¢åŸå¸‚
location_text.insert("1.0", "è¯·è¾“å…¥å¸‚çº§åœ°å€\nï¼ˆé»˜è®¤ä¸ºå½“å‰IPåœ°å€ï¼‰")
location_text.grid(row=0, column=1)
 
email1 = Text(root, width=25, height=2, font=("æ¥·ä½“", 15)) # æ¥æ”¶é‚®ç®±
email1.insert("1.0", "è¯·è¾“å…¥æ¥æ”¶é‚®ç®±\nï¼ˆå¤šä¸ªé‚®ç®±è¯·ç”¨,åˆ†å‰²ï¼‰")
email1.grid(row=1, column=1)
 
pushplus_text = Text(root, width=25, height=2, font=("æ¥·ä½“", 15)) # pushplus
pushplus_text.insert("1.0", "è¯·è¾“å…¥pushplusçš„token")
pushplus_text.grid(row=2, column=1)
 
url_head = "https://api.seniverse.com/v3/weather/daily.json?" # URLå¤´éƒ¨
key = "å¤©æ°”å¯†é’¥" # å¤©æ°”å¯†é’¥
 
# ---------------------------------#
def get_weather(locat_name):
    global emailname , token1 # å£°æ˜æ˜¯å…¨å±€å˜é‡
'''
å½“å‡½æ•°get_weatherè¢«è°ƒç”¨æ—¶ï¼Œå®ƒä¼šæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š  
1. å£°æ˜locat_nameå’Œemailnameä¸ºå…¨å±€å˜é‡ã€‚ 
2. æ£€æŸ¥locat_nameæ˜¯å¦ä¸ºæ¢è¡Œç¬¦æˆ–é»˜è®¤å€¼å­—ç¬¦ä¸²ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™å°†locat_nameèµ‹å€¼ä¸ºå­—ç¬¦ä¸²"ip"ã€‚ 
3. ç§»é™¤locat_nameä¸­è‡ªå¸¦çš„æ¢è¡Œç¬¦ã€‚ 
4. æ£€æŸ¥emailnameæ˜¯å¦ä¸ºæ¢è¡Œç¬¦æˆ–é»˜è®¤å€¼å­—ç¬¦ä¸²ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™å°†emailnameèµ‹å€¼ä¸ºæ¢è¡Œç¬¦ã€‚ 
5. ç§»é™¤emailnameä¸­è‡ªå¸¦çš„æ¢è¡Œç¬¦ã€‚ 
6. æ£€æŸ¥token1æ˜¯å¦ä¸ºæ¢è¡Œç¬¦æˆ–é»˜è®¤å€¼å­—ç¬¦ä¸²ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™å°†token1èµ‹å€¼ä¸ºæ¢è¡Œç¬¦ã€‚ 
7. ç§»é™¤token1ä¸­è‡ªå¸¦çš„æ¢è¡Œç¬¦ã€‚ 
8. æ ¹æ®ç»™å®šçš„å‚æ•°å’Œå›ºå®šçš„URLå¤´éƒ¨æ„é€ ä¸€ä¸ªå®Œæ•´çš„URLå­—ç¬¦ä¸²ã€‚ 
9. ä½¿ç”¨requestsæ¨¡å—çš„getæ–¹æ³•å‘é€ä¸€ä¸ªGETè¯·æ±‚åˆ°ä¸Šè¿°æ„é€ çš„URLï¼Œå¹¶å°†è¿”å›çš„ç»“æœèµ‹å€¼ç»™å˜é‡resqã€‚
'''
    # é»˜è®¤ä¸ºçš„å€¼
    if locat_name == "\n" or locat_name == "è¯·è¾“å…¥å¸‚çº§åœ°å€\nï¼ˆé»˜è®¤ä¸ºå½“å‰IPåœ°å€ï¼‰\n":
        locat_name = "ip"
    locat_name = locat_name.replace("\n", "")  # å»æ‰è‡ªå¸¦çš„æ¢è¡Œ
    if emailname == "\n" or emailname == "è¯·è¾“å…¥æ¥æ”¶é‚®ç®±\nï¼ˆå¤šä¸ªé‚®ç®±è¯·ç”¨,åˆ†å‰²ï¼‰\n":
        emailname = "\n"
    emailname = emailname.replace("\n", "")  # å»æ‰è‡ªå¸¦çš„æ¢è¡Œ
    if token1 == "\n" or token1 == "è¯·è¾“å…¥pushplusçš„token\n":
        token1 = '\n'
    token1 = token1.replace("\n", "")  # å»æ‰è‡ªå¸¦çš„æ¢è¡Œ
    # æ•´åˆurl
    url = url_head + "key=" + key + "&" + "location=" + locat_name + "&" + "language=zh-Hans&unit=c&start=0&days=5"
    # è·å–å¤©æ°”æ•°æ®
    resq = requests.get(url)
 
    if resq.status_code == 200:  # å¦‚æœè¯·æ±‚è¿”å›çš„çŠ¶æ€ç ä¸º200
        val_data = resq.text  # å°†è¯·æ±‚è¿”å›çš„æ–‡æœ¬èµ‹å€¼ç»™val_dataå˜é‡
        weather_data = json.loads(val_data)  # å°†val_dataè§£æä¸ºjsonæ ¼å¼å¹¶èµ‹å€¼ç»™weather_dataå˜é‡
 
        locat = weather_data['results'][0]['location']['name']  # è·å–å¤©æ°”æ•°æ®ä¸­çš„åœ°ç‚¹åç§°
        timezone = weather_data['results'][0]['location']['timezone']  # è·å–å¤©æ°”æ•°æ®ä¸­çš„æ—¶åŒº
        timezone_offset = weather_data['results'][0]['location']['timezone_offset']  # è·å–å¤©æ°”æ•°æ®ä¸­çš„æ—¶åŒºåç§»
 
        print("==========================")
        print("")
 
        print("åœ°åŒºï¼š", locat)  # æ‰“å°åœ°åŒºåç§°
        print("æ—¶åŒºï¼š", timezone)  # æ‰“å°æ—¶åŒº
        print("æ—¶åŒºåç§»ï¼š", timezone_offset)  # æ‰“å°æ—¶åŒºåç§»
        print("")
 
 
 
               weath_cn = 0  # å¤©æ°”åºå·
        daily = weather_data['results'][0]['daily']
    '''
    è¿™æ®µPythonä»£ç ç”¨äºä»å¤©æ°”APIè·å–å¤©æ°”ä¿¡æ¯å¹¶ä¿å­˜åˆ°æ–‡æœ¬æ–‡ä»¶ä¸­ã€‚
    ä»£ç é¦–å…ˆå®šä¹‰äº†ä¸€ä¸ªå˜é‡weath_cnè¡¨ç¤ºå¤©æ°”åºå·ï¼Œç„¶åè·å–åˆ°å¤©æ°”æ•°æ®çš„dailyä¿¡æ¯ã€‚
    æ¥ä¸‹æ¥ä½¿ç”¨whileå¾ªç¯æ¥éå†dailyåˆ—è¡¨ä¸­çš„æ¯ä¸€ä¸ªå¤©æ°”ä¿¡æ¯ï¼Œå¹¶è¿›è¡Œå¤„ç†ã€‚  
    åœ¨æ¯ä¸€æ¬¡å¾ªç¯ä¸­ï¼Œé¦–å…ˆè·å–å½“å‰å¤©æ°”ä¿¡æ¯çš„daily_dï¼Œ
    ç„¶åé€šè¿‡open()å‡½æ•°ä»¥å†™å…¥æ¨¡å¼æ‰“å¼€ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œ
    å¹¶å°†æ—¥æœŸä½œä¸ºæ–‡ä»¶åçš„ä¸€éƒ¨åˆ†ã€‚ç„¶åä½¿ç”¨print()å‡½æ•°æ‰“å°ä¸€äº›å¤©æ°”ä¿¡æ¯ï¼Œ
    åŒ…æ‹¬æ—¥æœŸã€å¤©æ°”æƒ…å†µã€æœ€é«˜æ¸©åº¦ã€æœ€ä½æ¸©åº¦ã€æ¹¿åº¦ã€é£å‘ã€é£é€Ÿã€é£å‘è§’åº¦ã€é£åŠ›ç­‰çº§å’Œé™æ°´é‡ã€‚
    æ¥ç€å°†è¿™äº›å¤©æ°”ä¿¡æ¯å†™å…¥åˆ°æ–‡ä»¶ä¸­ï¼Œ
    ä½¿ç”¨write()å‡½æ•°å°†æ—¥æœŸã€å¤©æ°”æƒ…å†µã€æœ€é«˜æ¸©åº¦ã€æœ€ä½æ¸©åº¦ã€æ¹¿åº¦ã€é£å‘ã€é£é€Ÿã€é£å‘è§’åº¦ã€é£åŠ›ç­‰çº§å’Œé™æ°´é‡å†™å…¥æ–‡ä»¶ã€‚  
    å¾ªç¯ç»“æŸåï¼Œä½¿ç”¨print()å‡½æ•°æ‰“å°æœ€åæ›´æ–°æ—¶é—´å’Œä¸€ä¸ªåˆ†éš”çº¿ã€‚
    '''
        while weath_cn < len(daily):
            daily_d = daily[weath_cn]
            with open(locat + daily_d['date']+'å¤©æ°”.txt', 'w') as file:
                print("")  # æ‰“å°ç©ºè¡Œ
                print("--------")  # æ‰“å°åˆ†éš”çº¿
                print("æ—¶é—´ï¼š", daily_d['date'])  # æ‰“å°æ—¥æœŸ
                print("å¤©æ°”ï¼š", daily_d['text_day'])  # æ‰“å°å¤©æ°”æƒ…å†µ
                print("ä»Šæ—¥æœ€é«˜æ¸©åº¦(â„ƒ):", daily_d['high'])  # æ‰“å°æœ€é«˜æ¸©åº¦
                print("ä»Šæ—¥æœ€ä½æ¸©åº¦(â„ƒ):", daily_d['low'])  # æ‰“å°æœ€ä½æ¸©åº¦
                print("æ¹¿åº¦(%):", daily_d['humidity'])  # æ‰“å°æ¹¿åº¦
                print("é£å‘:", daily_d['wind_direction'])  # æ‰“å°é£å‘
 
                print("é£é€Ÿ(km/h):", daily_d['wind_speed'])  # æ‰“å°é£é€Ÿ
                print("é£å‘è§’åº¦(0~360):", daily_d['wind_direction_degree'])  # æ‰“å°é£å‘è§’åº¦
                print("é£åŠ›ç­‰çº§:", daily_d['wind_scale'])  # æ‰“å°é£åŠ›ç­‰çº§
                print("é™æ°´é‡(mm):", daily_d['rainfall'])  # æ‰“å°é™æ°´é‡
                # æ‰“å¼€æ–‡ä»¶ä»¥å†™å…¥æ¨¡å¼
                file.write("æ—¶é—´ï¼š" + daily_d['date'] + "\n")  # å°†æ—¥æœŸå†™å…¥æ–‡ä»¶
                file.write("å¤©æ°”ï¼š" + daily_d['text_day'] + "\n")  # å°†å¤©æ°”æƒ…å†µå†™å…¥æ–‡ä»¶
                file.write("ä»Šæ—¥æœ€é«˜æ¸©åº¦(â„ƒ):" + str(daily_d['high']) + "\n")  # å°†æœ€é«˜æ¸©åº¦å†™å…¥æ–‡ä»¶
                file.write("ä»Šæ—¥æœ€ä½æ¸©åº¦(â„ƒ):" + str(daily_d['low']) + "\n")  # å°†æœ€ä½æ¸©åº¦å†™å…¥æ–‡ä»¶
                file.write("æ¹¿åº¦(%)ï¼š" + str(daily_d['humidity']) + "\n")  # å°†æ¹¿åº¦å†™å…¥æ–‡ä»¶
                file.write("é£å‘:" + daily_d['wind_direction'] + "\n")  # å°†é£å‘å†™å…¥æ–‡ä»¶
                file.write("é£é€Ÿ(km/h):" + str(daily_d['wind_speed']) + "\n")  # å°†é£é€Ÿå†™å…¥æ–‡ä»¶
                file.write("é£å‘è§’åº¦(0~360):" + str(daily_d['wind_direction_degree']) + "\n")  # å°†é£å‘è§’åº¦å†™å…¥æ–‡ä»¶
                file.write("é£åŠ›ç­‰çº§:" + daily_d['wind_scale'] + "\n")  # å°†é£åŠ›ç­‰çº§å†™å…¥æ–‡ä»¶
                file.write("é™æ°´é‡(mm):" + str(daily_d['rainfall']) + "\n")  # å°†é™æ°´é‡å†™å…¥æ–‡ä»¶
                weath_cn += 1  # å¤©æ°”åºå·åŠ 1
 
        print("")  # æ‰“å°ç©ºè¡Œ
 
        print("æœ€åæ›´æ–°äº:", weather_data['results'][0]['last_update'])  # æ‰“å°æœ€åæ›´æ–°æ—¶é—´
        print("")  # æ‰“å°ç©ºè¡Œ
        print("=============================")  # æ‰“å°åˆ†éš”çº¿
 
        # APIæ¥å£è¯·æ±‚
        params = {
            "key": "å¤©æ°”å¯†é’¥", # APIæ¥å£å¯†é’¥
            "location": locat_name,# ä½ç½®åç§°
            "language": "zh-Hans", # å•ä½
            "unit": "c",# å•ä½
        }
 
        # åŸºæœ¬å¤©æ°”
        url = "https://api.seniverse.com/v3/weather/now.json"
        # è·å–æ•°æ®
        r = requests.get(url, params=params)
        # è§£ææ•°æ®
        data = r.json()["results"]
        address = data[0]["location"]['path']  # åœ°ç‚¹
        temperature = data[0]['now']["temperature"]  # ç°åœ¨æ¸©åº¦
        text = data[0]['now']["text"]  # ç°åœ¨å¤©æ°”æƒ…å†µ
        last_update = data[0]["last_update"]
 
        # ç”Ÿæ´»æŒ‡æ•°
        url = "https://api.seniverse.com/v3/life/suggestion.json"
        # è·å–æ•°æ®
        r1 = requests.get(url, params=params)
        # è§£ææ•°æ®
        data = r1.json()["results"]
        car = data[0]["suggestion"]['car_washing']["brief"]  # æ´—è½¦
        dressing = data[0]["suggestion"]['dressing']["brief"]  # ç©¿è¡£
        flu = data[0]["suggestion"]['flu']["brief"]  # æ„Ÿå†’
        sport = data[0]["suggestion"]['sport']["brief"]  # è¿åŠ¨
        travel = data[0]["suggestion"]['travel']["brief"]  # æ—…è¡Œå»ºè®®
        uv = data[0]["suggestion"]['uv']["brief"]  # ç´«å¤–çº¿æƒ…å†µ
 
        # æ—¥æœŸ
        # è·å–å½“å‰æ—¥æœŸï¼Œæ ¼å¼ä¸ºå¹´-æœˆ-æ—¥
        date = datetime.date.today().strftime("%Y-%m-%d")
        # æ˜ŸæœŸå‡ 
        # è·å–å½“å‰æ—¥æœŸæ˜¯æ˜ŸæœŸå‡ ï¼ˆæ˜ŸæœŸä¸€ä¸º1ï¼‰ï¼Œå¹¶åŠ 1
        weekday = datetime.date.today().weekday() + 1
        # ç”¨cn2anåŒ…å°†é˜¿æ‹‰ä¼¯æ•°å­—è½¬ä¸ºä¸­æ–‡æ•°å­—
        # å°†æ˜ŸæœŸå‡ çš„æ•°å­—è½¬æ¢ä¸ºä¸­æ–‡æ•°å­—
        weekday = cn2an.an2cn(weekday)
 
 
        # æ˜¾ç¤ºæ¶ˆæ¯
        message = f"æ—¥æœŸï¼š{date} å‘¨{weekday}   " + address + "    å¤©æ°”ï¼š\n" + \
                  "ç°åœ¨æ¸©åº¦ï¼š" + temperature + "â„ƒ" + \
                  "\nç°åœ¨å¤©æ°”æƒ…å†µï¼š" + text + \
                  "\n" \
                  "\næ´—è½¦å»ºè®®ï¼š" + car + \
                  "\nç©¿è¡£å»ºè®®ï¼š" + dressing + \
                  "\næ„Ÿå†’æƒ…å†µï¼š" + flu + \
                  "\nè¿åŠ¨å»ºè®®ï¼š" + sport + \
                  "\næ—…è¡Œå»ºè®®ï¼š" + travel + \
                  "\nç´«å¤–çº¿æƒ…å†µï¼š" + uv + \
                  "\næ•°æ®æ›´æ–°æ—¶é—´ï¼š" + last_update
        print(message)
 
 
        # å‘é€é‚®ä»¶
        def send_email(subject, email_content, toaddr=emailname):
            # å‘é€é‚®ä»¶çš„å‡½æ•°ï¼Œæ¥æ”¶ä¸»é¢˜ã€é‚®ä»¶å†…å®¹å’Œæ”¶ä»¶äººåœ°å€ä½œä¸ºå‚æ•°ï¼Œé»˜è®¤æ”¶ä»¶äººåœ°å€ä¸º emailname
            # å‘ä»¶äººé‚®ç®±è´¦å·
            fromaddr = '123@qq.com'
            # å‘ä»¶äººé‚®ç®±å¯†ç 
            passwd = 'å‘ä»¶äººé‚®ç®±å¯†ç '
            # åˆ›å»ºä¸QQé‚®ç®±SMTPæœåŠ¡å™¨çš„åŠ å¯†è¿æ¥
            server = smtplib.SMTP_SSL('smtp.qq.com', port=465)
            # ä½¿ç”¨ç»™å®šçš„è´¦å·å’Œå¯†ç ç™»å½•é‚®ç®±æœåŠ¡å™¨
            server.login(fromaddr, passwd)
            # åˆ›å»ºé‚®ä»¶å†…å®¹
            message = MIMEText(email_content, 'plain', 'utf-8')
            # è®¾ç½®é‚®ä»¶çš„å‘ä»¶äººå’Œæ”¶ä»¶äºº
            message['From'] = '123 <123@qq.com>'
            message['To'] = toaddr
            # è®¾ç½®é‚®ä»¶çš„ä¸»é¢˜
            message['Subject'] = Header(subject, 'utf-8')
            # è·å–æ”¶ä»¶äººåœ°å€åˆ—è¡¨
            receiver = message['To'].split(';')
            # ä½¿ç”¨å‘ä»¶äººå’Œæ”¶ä»¶äººåˆ—è¡¨ï¼Œä»¥åŠé‚®ä»¶å†…å®¹å‘é€é‚®ä»¶
            server.sendmail(fromaddr, receiver, message.as_string())
            # å…³é—­ä¸é‚®ç®±æœåŠ¡å™¨çš„è¿æ¥
            server.quit()
 
 
        # è°ƒç”¨send_emailå‡½æ•°å‘é€é‚®ä»¶
        # é‚®ä»¶ä¸»é¢˜ä¸ºlocat+f"{date} å‘¨{weekday}" +"   çš„å¤©æ°”æƒ…å†µ"
        # é‚®ä»¶å†…å®¹ä¸ºmessage
        send_email(locat+f"{date} å‘¨{weekday}"  +"   çš„å¤©æ°”æƒ…å†µ", message)
 
        # æ‰“å°\n\né‚®ä»¶å‘é€æˆåŠŸ\n\n
        print("\n\né‚®ä»¶å‘é€æˆåŠŸ")
 
 
        # å¾®ä¿¡å…¬ä¼—å·æ¨é€å¤©æ°”
        def send_wechat(message):
            # è®¾ç½®tokenå˜é‡ä¸ºtoken1
            token = token1
            # è®¾ç½®titleå˜é‡ä¸ºlocat+'   çš„å¤©æ°”'
            title = locat + '   çš„å¤©æ°”'
            # è®¾ç½®contentå˜é‡ä¸ºmessage
            content = message
            # è®¾ç½®templateå˜é‡ä¸º'html'
            template = 'html'
            # æ‹¼æ¥urlå­—ç¬¦ä¸²
            url = f"https://www.pushplus.plus/send?token={token}&title={title}&content={content}&template={template}"
            # å‘é€getè¯·æ±‚ï¼Œå°†è¿”å›ç»“æœèµ‹å€¼ç»™rå˜é‡
            r = requests.get(url=url)
            # æ‰“å°å¾®ä¿¡å…¬ä¼—å·æ¨é€æˆåŠŸçš„ä¿¡æ¯
            print("å¾®ä¿¡å…¬ä¼—å·æ¨é€æˆåŠŸ")
 
 
 
    else:
        print(resq.status_code)
def start_request():
    """
    å¼€å§‹è¯·æ±‚å‡½æ•°ï¼Œè·å–æ–‡æœ¬ä¿¡æ¯å¹¶æ‰“å°ï¼ŒåŒæ—¶è·å–å…¨å±€å˜é‡emailnameå’Œtoken1çš„å€¼ï¼Œ
    å¹¶è°ƒç”¨get_weatherå‡½æ•°è·å–å¤©æ°”ä¿¡æ¯ã€‚
    """
    text = location_text.get("1.0", "end")  # è·å–æ–‡æœ¬ä¿¡æ¯
    print(text)  # æ‰“å°æ–‡æœ¬ä¿¡æ¯
    global emailname, token1  # å£°æ˜ä¸ºå…¨å±€å˜é‡
    emailname = email1.get("1.0", "end")  # è·å–å…¨å±€å˜é‡emailnameçš„å€¼
    token1 = pushplus_text.get("1.0", "end")  # è·å–å…¨å±€å˜é‡token1çš„å€¼
 
    get_weather(text)  # è°ƒç”¨get_weatherå‡½æ•°è·å–å¤©æ°”ä¿¡æ¯
 
def info_request():
    """
    æç¤ºç”¨æˆ·æœªæ¥3å¤©å¤©æ°”çŠ¶å†µä¼šä¿å­˜ä¸ºTXTæ–‡ä»¶ï¼Œå¹¶æ˜¾ç¤ºä½œè€…ä¿¡æ¯
    """
    messagebox.showinfo(title="æç¤º",
                        message="æœªæ¥3å¤©å¤©æ°”çŠ¶å†µä¼šä¿å­˜ä¸ºTXTæ–‡ä»¶~\rä¸è¾“å…¥ä¸ºé»˜è®¤å€¼\r\nä»…é™å¸‚çº§åŸå¸‚å‘€ğŸ˜Š  \rä½œè€…ï¼šå¿é»„è±†  ")
 
 
def init_gui():
    # è®¾ç½®çª—å£å¤§å°å’Œä½ç½®
    root.geometry("380x150+750+400")
    # è®¾ç½®çª—å£æ ‡é¢˜
    root.title("â€”å¤©æ°”è·å–å·¥å…·ğŸ˜€â€”  ")
 
    # åˆ›å»ºä¸€ä¸ªå¼€å§‹æŒ‰é’®
    start_button = Button(root, text="è· å–", anchor='w', font=("æ¥·ä½“", 15), command=start_request)
    # å°†å¼€å§‹æŒ‰é’®æ”¾ç½®åœ¨çª—å£çš„ç¬¬0è¡Œç¬¬0åˆ—
    start_button.grid(row=0, column=0)
 
    # åˆ›å»ºä¸€ä¸ªå…³äºæŒ‰é’®
    info_button = Button(root, text="å…³ äº", anchor='w', font=("æ¥·ä½“", 15), command=info_request)
    # å°†å…³äºæŒ‰é’®æ”¾ç½®åœ¨çª—å£çš„ç¬¬1è¡Œç¬¬0åˆ—
    info_button.grid(row=1, column=0)
 
 
def main():     #ä¸»å‡½æ•°ï¼Œå¯åŠ¨åº”ç”¨ç¨‹åº
    # åˆå§‹åŒ–GUIç•Œé¢
    init_gui()
    # è¿è¡ŒGUIç¨‹åº
    root.mainloop()
 
 
main()
```
